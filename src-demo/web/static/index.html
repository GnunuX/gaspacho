<html>
<head>
<title>test1.html</title>
<link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css" />
<script type="text/javascript" src="ext/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext/ext-all.js"></script>
<script type="text/javascript" src="js/GPO.ajaxglobal.js"></script>
<script language="Javascript" src='ext/build/locale/ext-lang-fr.js'></script>
<script type="text/javascript">
var viewport;




Ext.onReady(function(){
    Ext.QuickTips.init();

     function addTab(){
        tabs.add({
            title: 'New Tab ',
            iconCls: 'tabs',
            html: 'Tab Body <br/><br/>',
            closable:true
        }).show();
    };

    var tabs = new Ext.TabPanel({
        //renderTo:'tabs',
        resizeTabs:true, // turn on tab resizing
        minTabWidth: 115,
        tabWidth:135,
        enableTabScroll:true,
        //width:600,
        //height:250,
        defaults: {autoScroll:true}/*,
        plugins: new Ext.ux.TabCloseMenu()*/
    });

    // tab generation code



    var Tree = Ext.tree;

    var tree = new Tree.TreePanel({
        useArrows: true,
        autoScroll: true,
        animate: true,
        enableDD: true,
        containerScroll: true,
        border: false,
        // auto create TreeLoader
        dataUrl: 'flux.txt',

        root: {
            nodeType: 'async',
            text: 'Ext JS',
            draggable: false,
            id: 'src'
        }
    });


    tree.on('click', function(node, event){
        console.log(node);
            /*Ext.Ajax.request({
                url: './flux.txt',
                params: {
                    codeadmin: node.id
                },
                success: function(response){
                        console.log(response);
                        console.log("ajax ok");
                }
            });*/

              var store = new Ext.data.JsonStore({
                // store configs
                autoDestroy: true,
                url: 'flux.txt',
                storeId: 'group',
                // reader configs
                //root: 'images',
                //idProperty: 'name',
                fields: ['text', 'id','cls']
            });

            console.log(store);
            var index = 0;
            for (var i=0; i < store.getCount(); i++){
               addTab();
            }
    });

    viewport = new Ext.Viewport({
              layout : "border",
              items : [    {
                  region : "center",
                  title : "titre",
                  items :[tabs]
              },    {
                  region : "north",
                  title : "nord",
                  height : 40
              },    {
                  region : "south",
                  title : "sud",
                  height : 40
              },    {
                  id: 'west_panel',
                  region : "west",
                  title : "Group",
                  width : 150,
                  minWidth : 50,
                  split : true,
                  collapsible : true,
                  titleCollapse : true,
                        items : [
                                tree
                         ]
                 }]
            });


    tree.getRootNode().expand();

})
</script>
</head>
<body>